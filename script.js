const storyData = [
  {
    background: "img/soru_1.png",
    leftImage: "img/sag_gorsel1.png",
    rightImage: "img/sag_gorsel1.png",
    hint: "Deniz yolunda gitme.",
    intro: "Amerika'da yaşayan bir balıkçısın.",
    question: "Amerika'nın San Fransisco eyaletinde araba sürerken sahile yaklaştın ve radyoda uzmanlar balıkların güneş ışınları yüzünden zararlı olabileceği konusunda uyarılarda bulunuyor.",
    options: [
      {
        text: "Balık tut ve sat.",
        backText: "Balık tutup satabilirsin, bu sana para kazandıracak.",
        logText: "Balık tuttun ve bunu sattın. Sattığın kişi zehirlendi ve sen zararlı ve denetimsiz balığı sattığın için evine icra geldi ve Kaliforniya'daki arkadaşının evine gitmek zorunda kaldın.",
        hoverBackground: "img/balik_sat.png"
      },
      {
        text: "Balık tut ve ye.",
        backText: "Balık tutup yiyebilirsin, bu senin açlığını giderecek.",
        logText: "Balığı yedin ve zehirlendin, seni ambulans Kaliforniya'daki bir hastaneye kaldırdı.",
        hoverBackground: "img/balik.png"
      },
      {
        text: "Sahil yolundan uzaklaş.",
        backText: "Sahil yolundan uzaklaşarak, şehrin sakin bölgelerine doğru gideceksin.",
        logText: "Sahil yolundan uzaklaşarak yolunu kaybettin ve Kaliforniya'ya kadar yol aldın.",
        hoverBackground: "img/sahil_yolu_degil.png"
      },
      {
        text: "Sahil yolunda sürmeye devam et.",
        backText: "Sahil yolunda denizi izleyerek araba sürmeye devam et.",
        logText: "Sahil yolunda sürerken deniz yüzünden yoldan dikkatın dağıldı. Sonucunda büyük bir kaza gerçekleştirerek Kaliforniya'ya hastaneye kaldırıldın.",
        hoverBackground: "img/sahil_yolu.png"
      }
    ],
    next: [1,1,1,1]
  },
  {
    background: "img/soru_1.png",
    leftImage: "img/sol_gorsel1.png",
    rightImage: "img/sag_gorsel1.png",
    hint: "Deniz yolunda gitme.",
    intro: "Amerika'da yaşayan bir balıkçısın.",
    question: "Amerika'nın San Fransisco eyaletinde araba sürerken sahile yaklaştın ve radyoda uzmanlar balıkların güneş ışınları yüzünden zararlı olabileceği konusunda uyarılarda bulunuyor.",
    options: [
      {
        text: "Balık tut ve sat.",
        backText: "Balık tutup satabilirsin, bu sana para kazandıracak.",
        logText: "Balık tuttun ve bunu sattın. Sattığın kişi zehirlendi ve sen zararlı ve denetimsiz balığı sattığın için evine icra geldi ve Kaliforniya'daki arkadaşının evine gitmek zorunda kaldın.",
        hoverBackground: "img/balik_sat.png"
      },
      {
        text: "Balık tut ve ye.",
        backText: "Balık tutup yiyebilirsin, bu senin açlığını giderecek.",
        logText: "Balığı yedin ve zehirlendin, seni ambulans Kaliforniya'daki bir hastaneye kaldırdı.",
        hoverBackground: "img/balik.png"
      },
      {
        text: "Sahil yolundan uzaklaş.",
        backText: "Sahil yolundan uzaklaşarak, şehrin sakin bölgelerine doğru gideceksin.",
        logText: "Sahil yolundan uzaklaşarak yolunu kaybettin ve Kaliforniya'ya kadar yol aldın.",
        hoverBackground: "img/sahil_yolu_degil.png"
      },
      {
        text: "Sahil yolunda sürmeye devam et.",
        backText: "Sahil yolunda denizi izleyerek araba sürmeye devam et.",
        logText: "Sahil yolunda sürerken deniz yüzünden yoldan dikkatın dağıldı. Sonucunda büyük bir kaza gerçekleştirerek Kaliforniya'ya hastaneye kaldırıldın.",
        hoverBackground: "img/sahil_yolu.png"
      }
    ],
    next: [2,2,2,2]
  },
    {
    background: "img/soru_1.png",
    leftImage: "img/sol_gorsel1.png",
    rightImage: "img/sag_gorsel1.png",
    hint: "Deniz yolunda gitme.",
    intro: "Amerika'da yaşayan bir balıkçısın.",
    question: "Amerika'nın San Fransisco eyaletinde araba sürerken sahile yaklaştın ve radyoda uzmanlar balıkların güneş ışınları yüzünden zararlı olabileceği konusunda uyarılarda bulunuyor.",
    options: [
      {
        text: "Balık tut ve sat.",
        backText: "Balık tutup satabilirsin, bu sana para kazandıracak.",
        logText: "Balık tuttun ve bunu sattın. Sattığın kişi zehirlendi ve sen zararlı ve denetimsiz balığı sattığın için evine icra geldi ve Kaliforniya'daki arkadaşının evine gitmek zorunda kaldın.",
        hoverBackground: "img/balik_sat.png"
      },
      {
        text: "Balık tut ve ye.",
        backText: "Balık tutup yiyebilirsin, bu senin açlığını giderecek.",
        logText: "Balığı yedin ve zehirlendin, seni ambulans Kaliforniya'daki bir hastaneye kaldırdı.",
        hoverBackground: "img/balik.png"
      },
      {
        text: "Sahil yolundan uzaklaş.",
        backText: "Sahil yolundan uzaklaşarak, şehrin sakin bölgelerine doğru gideceksin.",
        logText: "Sahil yolundan uzaklaşarak yolunu kaybettin ve Kaliforniya'ya kadar yol aldın.",
        hoverBackground: "img/sahil_yolu_degil.png"
      },
      {
        text: "Sahil yolunda sürmeye devam et.",
        backText: "Sahil yolunda denizi izleyerek araba sürmeye devam et.",
        logText: "Sahil yolunda sürerken deniz yüzünden yoldan dikkatın dağıldı. Sonucunda büyük bir kaza gerçekleştirerek Kaliforniya'ya hastaneye kaldırıldın.",
        hoverBackground: "img/sahil_yolu.png"
      }
    ],
    next: [3,3,3,3]
  },
    {
    background: "img/soru_1.png",
    leftImage: "img/sol_gorsel1.png",
    rightImage: "img/sag_gorsel1.png",
    hint: "Deniz yolunda gitme.",
    intro: "Amerika'da yaşayan bir balıkçısın.",
    question: "Amerika'nın San Fransisco eyaletinde araba sürerken sahile yaklaştın ve radyoda uzmanlar balıkların güneş ışınları yüzünden zararlı olabileceği konusunda uyarılarda bulunuyor.",
    options: [
      {
        text: "Balık tut ve sat.",
        backText: "Balık tutup satabilirsin, bu sana para kazandıracak.",
        logText: "Balık tuttun ve bunu sattın. Sattığın kişi zehirlendi ve sen zararlı ve denetimsiz balığı sattığın için evine icra geldi ve Kaliforniya'daki arkadaşının evine gitmek zorunda kaldın.",
        hoverBackground: "img/balik_sat.png"
      },
      {
        text: "Balık tut ve ye.",
        backText: "Balık tutup yiyebilirsin, bu senin açlığını giderecek.",
        logText: "Balığı yedin ve zehirlendin, seni ambulans Kaliforniya'daki bir hastaneye kaldırdı.",
        hoverBackground: "img/balik.png"
      },
      {
        text: "Sahil yolundan uzaklaş.",
        backText: "Sahil yolundan uzaklaşarak, şehrin sakin bölgelerine doğru gideceksin.",
        logText: "Sahil yolundan uzaklaşarak yolunu kaybettin ve Kaliforniya'ya kadar yol aldın.",
        hoverBackground: "img/sahil_yolu_degil.png"
      },
      {
        text: "Sahil yolunda sürmeye devam et.",
        backText: "Sahil yolunda denizi izleyerek araba sürmeye devam et.",
        logText: "Sahil yolunda sürerken deniz yüzünden yoldan dikkatın dağıldı. Sonucunda büyük bir kaza gerçekleştirerek Kaliforniya'ya hastaneye kaldırıldın.",
        hoverBackground: "img/sahil_yolu.png"
      }
    ],
    next: [4,4,4,4]
  },
    {
    background: "img/soru_1.png",
    leftImage: "img/sol_gorsel1.png",
    rightImage: "img/sag_gorsel1.png",
    hint: "Deniz yolunda gitme.",
    intro: "Amerika'da yaşayan bir balıkçısın.",
    question: "Amerika'nın San Fransisco eyaletinde araba sürerken sahile yaklaştın ve radyoda uzmanlar balıkların güneş ışınları yüzünden zararlı olabileceği konusunda uyarılarda bulunuyor.",
    options: [
      {
        text: "Balık tut ve sat.",
        backText: "Balık tutup satabilirsin, bu sana para kazandıracak.",
        logText: "Balık tuttun ve bunu sattın. Sattığın kişi zehirlendi ve sen zararlı ve denetimsiz balığı sattığın için evine icra geldi ve Kaliforniya'daki arkadaşının evine gitmek zorunda kaldın.",
        hoverBackground: "img/balik_sat.png"
      },
      {
        text: "Balık tut ve ye.",
        backText: "Balık tutup yiyebilirsin, bu senin açlığını giderecek.",
        logText: "Balığı yedin ve zehirlendin, seni ambulans Kaliforniya'daki bir hastaneye kaldırdı.",
        hoverBackground: "img/balik.png"
      },
      {
        text: "Sahil yolundan uzaklaş.",
        backText: "Sahil yolundan uzaklaşarak, şehrin sakin bölgelerine doğru gideceksin.",
        logText: "Sahil yolundan uzaklaşarak yolunu kaybettin ve Kaliforniya'ya kadar yol aldın.",
        hoverBackground: "img/sahil_yolu_degil.png"
      },
      {
        text: "Sahil yolunda sürmeye devam et.",
        backText: "Sahil yolunda denizi izleyerek araba sürmeye devam et.",
        logText: "Sahil yolunda sürerken deniz yüzünden yoldan dikkatın dağıldı. Sonucunda büyük bir kaza gerçekleştirerek Kaliforniya'ya hastaneye kaldırıldın.",
        hoverBackground: "img/sahil_yolu.png"
      }
    ],
    next: [5,5,5,5]
  },
    {
    background: "img/soru_1.png",
    leftImage: "img/sol_gorsel1.png",
    rightImage: "img/sag_gorsel1.png",
    hint: "Deniz yolunda gitme.",
    intro: "Amerika'da yaşayan bir balıkçısın.",
    question: "Amerika'nın San Fransisco eyaletinde araba sürerken sahile yaklaştın ve radyoda uzmanlar balıkların güneş ışınları yüzünden zararlı olabileceği konusunda uyarılarda bulunuyor.",
    options: [
      {
        text: "Balık tut ve sat.",
        backText: "Balık tutup satabilirsin, bu sana para kazandıracak.",
        logText: "Balık tuttun ve bunu sattın. Sattığın kişi zehirlendi ve sen zararlı ve denetimsiz balığı sattığın için evine icra geldi ve Kaliforniya'daki arkadaşının evine gitmek zorunda kaldın.",
        hoverBackground: "img/balik_sat.png"
      },
      {
        text: "Balık tut ve ye.",
        backText: "Balık tutup yiyebilirsin, bu senin açlığını giderecek.",
        logText: "Balığı yedin ve zehirlendin, seni ambulans Kaliforniya'daki bir hastaneye kaldırdı.",
        hoverBackground: "img/balik.png"
      },
      {
        text: "Sahil yolundan uzaklaş.",
        backText: "Sahil yolundan uzaklaşarak, şehrin sakin bölgelerine doğru gideceksin.",
        logText: "Sahil yolundan uzaklaşarak yolunu kaybettin ve Kaliforniya'ya kadar yol aldın.",
        hoverBackground: "img/sahil_yolu_degil.png"
      },
      {
        text: "Sahil yolunda sürmeye devam et.",
        backText: "Sahil yolunda denizi izleyerek araba sürmeye devam et.",
        logText: "Sahil yolunda sürerken deniz yüzünden yoldan dikkatın dağıldı. Sonucunda büyük bir kaza gerçekleştirerek Kaliforniya'ya hastaneye kaldırıldın.",
        hoverBackground: "img/sahil_yolu.png"
      }
    ],
    next: [6,6,6,6]
  },
    {
    background: "img/soru_1.png",
    leftImage: "img/sol_gorsel1.png",
    rightImage: "img/sag_gorsel1.png",
    hint: "Deniz yolunda gitme.",
    intro: "Amerika'da yaşayan bir balıkçısın.",
    question: "Amerika'nın San Fransisco eyaletinde araba sürerken sahile yaklaştın ve radyoda uzmanlar balıkların güneş ışınları yüzünden zararlı olabileceği konusunda uyarılarda bulunuyor.",
    options: [
      {
        text: "Balık tut ve sat.",
        backText: "Balık tutup satabilirsin, bu sana para kazandıracak.",
        logText: "Balık tuttun ve bunu sattın. Sattığın kişi zehirlendi ve sen zararlı ve denetimsiz balığı sattığın için evine icra geldi ve Kaliforniya'daki arkadaşının evine gitmek zorunda kaldın.",
        hoverBackground: "img/balik_sat.png"
      },
      {
        text: "Balık tut ve ye.",
        backText: "Balık tutup yiyebilirsin, bu senin açlığını giderecek.",
        logText: "Balığı yedin ve zehirlendin, seni ambulans Kaliforniya'daki bir hastaneye kaldırdı.",
        hoverBackground: "img/balik.png"
      },
      {
        text: "Sahil yolundan uzaklaş.",
        backText: "Sahil yolundan uzaklaşarak, şehrin sakin bölgelerine doğru gideceksin.",
        logText: "Sahil yolundan uzaklaşarak yolunu kaybettin ve Kaliforniya'ya kadar yol aldın.",
        hoverBackground: "img/sahil_yolu_degil.png"
      },
      {
        text: "Sahil yolunda sürmeye devam et.",
        backText: "Sahil yolunda denizi izleyerek araba sürmeye devam et.",
        logText: "Sahil yolunda sürerken deniz yüzünden yoldan dikkatın dağıldı. Sonucunda büyük bir kaza gerçekleştirerek Kaliforniya'ya hastaneye kaldırıldın.",
        hoverBackground: "img/sahil_yolu.png"
      }
    ],
    next: [7,7,7,7]
  },
    {
    background: "img/soru_1.png",
    leftImage: "img/sol_gorsel1.png",
    rightImage: "img/sag_gorsel1.png",
    hint: "Deniz yolunda gitme.",
    intro: "Amerika'da yaşayan bir balıkçısın.",
    question: "Amerika'nın San Fransisco eyaletinde araba sürerken sahile yaklaştın ve radyoda uzmanlar balıkların güneş ışınları yüzünden zararlı olabileceği konusunda uyarılarda bulunuyor.",
    options: [
      {
        text: "Balık tut ve sat.",
        backText: "Balık tutup satabilirsin, bu sana para kazandıracak.",
        logText: "Balık tuttun ve bunu sattın. Sattığın kişi zehirlendi ve sen zararlı ve denetimsiz balığı sattığın için evine icra geldi ve Kaliforniya'daki arkadaşının evine gitmek zorunda kaldın.",
        hoverBackground: "img/balik_sat.png"
      },
      {
        text: "Balık tut ve ye.",
        backText: "Balık tutup yiyebilirsin, bu senin açlığını giderecek.",
        logText: "Balığı yedin ve zehirlendin, seni ambulans Kaliforniya'daki bir hastaneye kaldırdı.",
        hoverBackground: "img/balik.png"
      },
      {
        text: "Sahil yolundan uzaklaş.",
        backText: "Sahil yolundan uzaklaşarak, şehrin sakin bölgelerine doğru gideceksin.",
        logText: "Sahil yolundan uzaklaşarak yolunu kaybettin ve Kaliforniya'ya kadar yol aldın.",
        hoverBackground: "img/sahil_yolu_degil.png"
      },
      {
        text: "Sahil yolunda sürmeye devam et.",
        backText: "Sahil yolunda denizi izleyerek araba sürmeye devam et.",
        logText: "Sahil yolunda sürerken deniz yüzünden yoldan dikkatın dağıldı. Sonucunda büyük bir kaza gerçekleştirerek Kaliforniya'ya hastaneye kaldırıldın.",
        hoverBackground: "img/sahil_yolu.png"
      }
    ],
    next: [8,8,8,8]
  },
    {
    background: "img/soru_1.png",
    leftImage: "img/sol_gorsel1.png",
    rightImage: "img/sag_gorsel1.png",
    hint: "Deniz yolunda gitme.",
    intro: "Amerika'da yaşayan bir balıkçısın.",
    question: "Amerika'nın San Fransisco eyaletinde araba sürerken sahile yaklaştın ve radyoda uzmanlar balıkların güneş ışınları yüzünden zararlı olabileceği konusunda uyarılarda bulunuyor.",
    options: [
      {
        text: "Balık tut ve sat.",
        backText: "Balık tutup satabilirsin, bu sana para kazandıracak.",
        logText: "Balık tuttun ve bunu sattın. Sattığın kişi zehirlendi ve sen zararlı ve denetimsiz balığı sattığın için evine icra geldi ve Kaliforniya'daki arkadaşının evine gitmek zorunda kaldın.",
        hoverBackground: "img/balik_sat.png"
      },
      {
        text: "Balık tut ve ye.",
        backText: "Balık tutup yiyebilirsin, bu senin açlığını giderecek.",
        logText: "Balığı yedin ve zehirlendin, seni ambulans Kaliforniya'daki bir hastaneye kaldırdı.",
        hoverBackground: "img/balik.png"
      },
      {
        text: "Sahil yolundan uzaklaş.",
        backText: "Sahil yolundan uzaklaşarak, şehrin sakin bölgelerine doğru gideceksin.",
        logText: "Sahil yolundan uzaklaşarak yolunu kaybettin ve Kaliforniya'ya kadar yol aldın.",
        hoverBackground: "img/sahil_yolu_degil.png"
      },
      {
        text: "Sahil yolunda sürmeye devam et.",
        backText: "Sahil yolunda denizi izleyerek araba sürmeye devam et.",
        logText: "Sahil yolunda sürerken deniz yüzünden yoldan dikkatın dağıldı. Sonucunda büyük bir kaza gerçekleştirerek Kaliforniya'ya hastaneye kaldırıldın.",
        hoverBackground: "img/sahil_yolu.png"
      }
    ],
    next: [9,9,9,9]
  },
    {
    background: "img/soru_1.png",
    leftImage: "img/sol_gorsel1.png",
    rightImage: "img/sag_gorsel1.png",
    hint: "Deniz yolunda gitme.",
    intro: "Amerika'da yaşayan bir balıkçısın.",
    question: "Amerika'nın San Fransisco eyaletinde araba sürerken sahile yaklaştın ve radyoda uzmanlar balıkların güneş ışınları yüzünden zararlı olabileceği konusunda uyarılarda bulunuyor.",
    options: [
      {
        text: "Balık tut ve sat.",
        backText: "Balık tutup satabilirsin, bu sana para kazandıracak.",
        logText: "Balık tuttun ve bunu sattın. Sattığın kişi zehirlendi ve sen zararlı ve denetimsiz balığı sattığın için evine icra geldi ve Kaliforniya'daki arkadaşının evine gitmek zorunda kaldın.",
        hoverBackground: "img/balik_sat.png"
      },
      {
        text: "Balık tut ve ye.",
        backText: "Balık tutup yiyebilirsin, bu senin açlığını giderecek.",
        logText: "Balığı yedin ve zehirlendin, seni ambulans Kaliforniya'daki bir hastaneye kaldırdı.",
        hoverBackground: "img/balik.png"
      },
      {
        text: "Sahil yolundan uzaklaş.",
        backText: "Sahil yolundan uzaklaşarak, şehrin sakin bölgelerine doğru gideceksin.",
        logText: "Sahil yolundan uzaklaşarak yolunu kaybettin ve Kaliforniya'ya kadar yol aldın.",
        hoverBackground: "img/sahil_yolu_degil.png"
      },
      {
        text: "Sahil yolunda sürmeye devam et.",
        backText: "Sahil yolunda denizi izleyerek araba sürmeye devam et.",
        logText: "Sahil yolunda sürerken deniz yüzünden yoldan dikkatın dağıldı. Sonucunda büyük bir kaza gerçekleştirerek Kaliforniya'ya hastaneye kaldırıldın.",
        hoverBackground: "img/sahil_yolu.png"
      }
    ],
    next: [10,10,10,10]
  }
];


let currentIndex = 0;
const questionText = document.getElementById("question-text");
const optionButtons = document.querySelectorAll(".option");
const logList = document.getElementById("log-list");

function renderScene(index) {
  const scene = storyData[index];
  if (!scene) return;

  currentIndex = index;

  // 📷 Arka planı sahneye göre ayarla
  if (scene.background) {
    document.body.style.backgroundImage = `url('${scene.background}')`;
  }

  const leftImage = document.getElementById("left-image");
  const rightImage = document.getElementById("right-image");

  if (leftImage && scene.leftImage) {
    leftImage.src = scene.leftImage;
  }

  if (rightImage && scene.rightImage) {
    rightImage.src = scene.rightImage;
  }

  questionText.textContent = scene.question;
  const optionsContainer = document.querySelector(".options");
  optionsContainer.innerHTML = "";

  scene.options.forEach((opt, i) => {
    const card = document.createElement("div");
    card.classList.add("option-card");

    const inner = document.createElement("div");
    inner.classList.add("option-inner");

    const front = document.createElement("div");
    front.classList.add("option-front");
    front.textContent = opt.text;

    const back = document.createElement("div");
    back.classList.add("option-back");
    back.textContent = opt.backText;

    inner.appendChild(front);
    inner.appendChild(back);
    card.appendChild(inner);
    optionsContainer.appendChild(card);

    const tooltipText = document.getElementById("tooltip-text");
      if (tooltipText) {
        tooltipText.textContent = scene.hint || "Bu sahne için ipucu bulunamadı.";
      }

    // 🎯 Tıklama olayı
    card.addEventListener("click", () => {
      if (opt.logText) {
        const li = document.createElement("li");
        li.textContent = opt.logText;
        logList.appendChild(li);
      }
      const nextScene = scene.next ? scene.next[i] : null;
      if (nextScene !== null && nextScene !== undefined) {
        renderScene(nextScene);
      }
    });

    // 🖱️ Hover olayı – arka planı değiştir
    card.addEventListener("mouseenter", () => {
      if (opt.hoverBackground) {
        document.body.style.backgroundImage = `url('${opt.hoverBackground}')`;
      }
    });

    // ❌ Mouse çıkınca sahne arka planına dön
    card.addEventListener("mouseleave", () => {
      if (scene.background) {
        document.body.style.backgroundImage = `url('${scene.background}')`;
      }
    });
  });

  // 📖 Log'ları sadece bir kere yaz
  if (scene.logs && !scene._logsShown) {
    scene.logs.forEach(log => {
      const li = document.createElement("li");
      li.textContent = log;
      logList.appendChild(li);
    });
    scene._logsShown = true;
  }

  // 📘 Giriş metni varsa (ilk sahne)
  if (scene.intro && !scene._introShown) {
    const introItem = document.createElement("li");
    introItem.textContent = scene.intro;
    logList.appendChild(introItem);
    scene._introShown = true;
  }

    if (opt.logText) {
    addLogWithEffect(opt.logText);
  }

  if (scene.intro && !scene._introShown) {
    addLogWithEffect(scene.intro);
    scene._introShown = true;
  }
}

function addLogWithEffect(text) {
  const li = document.createElement("li");
  logList.appendChild(li);

  let i = 0;
  const interval = setInterval(() => {
    li.textContent += text[i];
    i++;
    if (i >= text.length) {
      clearInterval(interval);
    }
    logList.scrollTop = logList.scrollHeight;
  }, 40);
}


optionButtons.forEach(button => {
  button.addEventListener("click", () => {
    const selectedIndex = parseInt(button.getAttribute("data-index"));
    const nextSceneIndex = storyData[currentIndex].next[selectedIndex];
    currentIndex = nextSceneIndex;
    renderScene(currentIndex);
  });
});

renderScene(currentIndex);
